# Agents.md - Wild Codebase Guide

Guide for AI coding assistants working with the Wild Kotlin Multiplatform design system.

## Project Overview

**Wild** is a Kotlin Multiplatform design system library built with Compose Multiplatform. Provides primitive components and utilities for Android, Android TV, Desktop (JVM), and Web (JS/WASM).

**Tech Stack**: Kotlin Multiplatform, Compose Multiplatform, Gradle (custom plugins), Metalava (API tracking), MkDocs (docs)

**Published Modules**:
- `io.daio.wild:foundations`, `content-color`, `style`, `modifier`, `container`, `button`

## Project Structure

```
wild/
├── foundations/          # Core utilities
├── content-color/        # Content color composition local
├── style/                # Style system
├── modifier/             # Custom modifiers
├── components/button/    # Button component
├── layout/container/     # Container layout
├── playbook/             # Demo apps (android, androidTv, desktop, web, shared)
├── internal/benchmark/   # Benchmarking
├── gradle/build-logic/   # Custom Gradle plugins
└── docs/                 # MkDocs documentation
```

**Source Sets**: `commonMain`, `androidMain`, `jvmMain`, `jsMain`, `wasmJsMain`, `nativeMain`, `commonTest`, `jvmTest`, `androidTest`

**Build Logic**: Custom plugins in `gradle/build-logic/convention/` handle KMP setup, Compose, Android, publishing, formatting (Spotless), and static analysis (Detekt).

**API Tracking**: Each module has `api/` directory with `api.txt` (current) and versioned snapshots (`0.3.4.txt`, etc.) generated by Metalava.

## Code Conventions

**Package Naming**: `io.daio.wild.<module-name>`

**Standards**:
- Copyright header: `// Copyright 2024, Dai Williams // SPDX-License-Identifier: Apache-2.0`
- Formatting: Spotless (ktlint) - `./gradlew spotlessApply`
- Static analysis: Detekt - `./gradlew detekt`
- Public APIs: KDoc with `@param`, `@since`, examples

**Platform-Specific Code**:
```kotlin
// commonMain
expect val LocalAlternatePlatformColor: ProvidableCompositionLocal<Color>

// androidMain
actual val LocalAlternatePlatformColor: ProvidableCompositionLocal<Color> = ...
```

**Module Dependencies**: `foundations` → `style`/`content-color`/`modifier` → `container` → `button`

## Development Workflows

**Build**: `./gradlew build` or `./gradlew :style:build`

**Test**: `./gradlew test` / `./gradlew jvmTest` / `./gradlew :style:jvmTest --tests "ClassName"`

**Playbook Apps**:
- Desktop: `./gradlew :playbook:desktop:run`
- Web (JS): `./gradlew :playbook:web:jsBrowserRun`
- Web (WASM): `./gradlew :playbook:web:wasmJsBrowserRun`
- Android: `./gradlew :playbook:android:installDebug`
- Android TV: `./gradlew :playbook:androidTv:installDebug`

**Code Quality**: `./gradlew spotlessCheck detekt lint`

**Docs**: `./gradlew dokkaHtmlMultiModule` (API), `mkdocs serve` (local), `mkdocs gh-deploy` (deploy)

**Publishing**: `./gradlew publish` (Maven Central), `./gradlew publishAllPublicationsToGitHubPackagesRepository -PuseGitHubPublishing` (GitHub Packages)

**Release**: `./scripts/prepare-release.sh <version>` (copies API files)

## Platform-Specific

**Android**: Min SDK 23, Target/Compile SDK 36, Java 21. Uses AndroidX (Activity Compose, AppCompat, Core KTX). TV support via `androidx.tv.material3`.

**Desktop**: Java 21, Compose Desktop, preview support.

**Web**: JS and WASM targets, both executable.

**iOS**: Configured (`iosX64`, `iosArm64`, `iosSimulatorArm64`) but may not be actively maintained.

**Patterns**:
- Expect/Actual for platform code
- Try-catch for optional platform libraries
- Composition Locals for cross-platform theming

**Testing**: `commonTest` for shared logic, `jvmTest` for most unit tests, `androidTest` for Android-specific.

## Key Technologies

- **Compose Multiplatform**: 1.9.3, compiler 1.5.7.1
- **Kotlin**: 2.2.21
- **Gradle**: Custom plugins, version catalog (`gradle/libs.versions.toml`)
- **Metalava**: API signature tracking
- **MkDocs**: Material theme, GitHub Pages deployment
- **Tools**: Spotless, Detekt, Dokka, Maven Publish

## Quick Reference

```bash
# Common commands
./gradlew build
./gradlew jvmTest
./gradlew spotlessApply
./gradlew :playbook:desktop:run
./gradlew dokkaHtmlMultiModule
```

**Key Files**: `build.gradle.kts`, `settings.gradle.kts`, `gradle/libs.versions.toml`, `mkdocs.yml`

**Links**: [Documentation](https://daio-io.github.io/wild/) | [GitHub](https://github.com/daio-io/wild) | License: Apache 2.0
